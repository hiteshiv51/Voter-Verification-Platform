<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Privacy & Ethics | Voter Verification Platform</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="privacy.css">
</head>

<body>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, onAuthStateChanged } 
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
import { getFirestore, doc, getDoc } 
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDzphuLvs9hmQec6B38J-W01MdPtoIauYY",
  authDomain: "voter-eligiblity-system.firebaseapp.com",
  projectId: "voter-eligiblity-system"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// navbar links
const dashboardLink = document.getElementById("dashboardLink");
const verificationLink = document.getElementById("verificationLink");
const flaggedLink = document.getElementById("flaggedLink");

// hide by default
function hideConfidential() {
  if (dashboardLink) dashboardLink.style.display = "none";
  if (verificationLink) verificationLink.style.display = "none";
  if (flaggedLink) flaggedLink.style.display = "none";
}

// protect clicks
function protect(link) {
  if (!link) return;
  link.addEventListener("click", (e) => {
    if (!auth.currentUser) {
      e.preventDefault();
      alert("Please login to access confidential data.");
    }
  });
}

protect(dashboardLink);
protect(verificationLink);
protect(flaggedLink);

// auth check
onAuthStateChanged(auth, async (user) => {
  if (!user) {
    hideConfidential();
    return;
  }

  const snap = await getDoc(doc(db, "users", user.uid));
  const role = snap.exists() ? snap.data().role : "";

  if (role !== "Election Authority") {
    hideConfidential();
  }
});
</script>

<!-- ================= HEADER ================= -->
<header>
    <h1>üîê Privacy & Ethics</h1>
    <p>Data protection, access control, and responsible system use</p>

    <nav>
        <a href="index.html">Home</a> |
        <a href="dashboard.html" id="dashboardLink">Dashboard</a> |
        <a href="verification.html" id="verificationLink">Verification</a> |
        <a href="flagged_records.html" id="flaggedLink">Flagged Records</a> |

        <a href="privacy.html">Privacy</a> 
        
    </nav>
</header>

<!-- ================= PRIVACY CONTENT ================= -->
<section class="privacy-section">

    <h2>Our Privacy Commitment</h2>
    <p>
        This platform is designed with a privacy-first approach.  
        All data analysis is advisory in nature and does not result in
        automated decisions or modifications.
    </p>

    <h2>Data Usage Principles</h2>
    <ul>
        <li>Only authorized personnel can access sensitive views</li>
        <li>No personal data is exposed to unauthorized users</li>
        <li>All outputs are decision-support only</li>
        <li>No automated deletion or alteration of records</li>
    </ul>

    <h2>Ethical Safeguards</h2>
    <ul>
        <li>Human verification is mandatory for all flagged records</li>
        <li>Confidence scores indicate likelihood, not conclusions</li>
        <li>The system supports transparency and accountability</li>
        <li>Designed to align with public-sector governance norms</li>
    </ul>

    <h2>Access Control</h2>
    <p>
        Role-based access ensures that citizens, technical staff,
        and election authorities only see information appropriate
        to their responsibilities.
    </p>

</section>

<!-- ================= INFO NOTE ================= -->
<section class="info-note">
    <p>
        This system does not replace human judgment.  
        It exists solely to assist authorized officials with data-driven insights.
    </p>
</section>

<!-- ================= FOOTER ================= -->
<footer>
    <p>
        Decision-Support System ¬∑ Advisory Only<br>
        Privacy ¬∑ Transparency ¬∑ Accountability
    </p>
</footer>

</body>
</html>
